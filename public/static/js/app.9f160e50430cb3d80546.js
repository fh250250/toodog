webpackJsonp([1],{"+skl":function(t,e){},Knom:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("/5sW"),r=a("Xxa5"),n=a.n(r),o=a("exGp"),i=a.n(o),l=a("mtWM"),c=a.n(l),u={data:function(){return{proxy:{count:0,total:0}}},created:function(){this.pollProxyStatus()},methods:{pollProxyStatus:function(){var t=this;return i()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()("/api/proxyStatus");case 2:a=e.sent,s=a.data,t.proxy.count=s.count,t.proxy.total=s.total,setTimeout(t.pollProxyStatus,1e4);case 7:case"end":return e.stop()}},e,t)}))()}}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"status"},[e("Card",{staticClass:"proxy"},[e("p",{attrs:{slot:"title"},slot:"title"},[this._v("代理")]),e("ul",[e("li",[e("span",[this._v("可用 "+this._s(this.proxy.count))])]),e("li",[e("span",[this._v("总共 "+this._s(this.proxy.total))])])])])],1)},staticRenderFns:[]};var p={0:["评论中","blue"],1:["点赞中","yellow"],2:["完成","green"],"-1":["失败","red"]},m={data:function(){return{task:{articleId:"",comment:"",targetLikeCount:30},taskRules:{articleId:[{required:!0,message:"文章 ID 不能为空",trigger:"blur"}],comment:[{required:!0,message:"评论不能为空",trigger:"blur"}]},columns:[{title:"文章",render:function(t,e){return t("a",{attrs:{href:"http://www.yidianzixun.com/article/"+e.row.articleId,target:"_blank"}},e.row.articleId)}},{title:"评论",key:"comment"},{title:"点赞数",render:function(t,e){return e.row.likeCount+" / "+e.row.targetLikeCount}},{title:"状态",render:function(t,e){return t("Tag",{props:{type:"dot",color:p[e.row.stage][1]}},p[e.row.stage][0])}},{title:"错误",key:"err"}],tasks:[]}},created:function(){this.pollTasks()},methods:{submit:function(){var t=this;this.$refs.addTask.validate(function(e){e&&c.a.post("/api/addTask",{articleId:t.task.articleId,comment:t.task.comment,targetLikeCount:t.task.targetLikeCount}).then(function(){t.$Message.success("Success!"),t.$refs.addTask.resetFields()}).catch(function(e){t.$Message.error(e.message)})})},pollTasks:function(){var t=this;return i()(n.a.mark(function e(){var a,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c()("/api/listTask");case 2:a=e.sent,s=a.data,t.tasks=s.tasks,setTimeout(t.pollTasks,3e4);case 6:case"end":return e.stop()}},e,t)}))()}}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tasks"},[a("Form",{ref:"addTask",attrs:{model:t.task,rules:t.taskRules,inline:"inline","label-width":65,"label-position":"left"}},[a("FormItem",{attrs:{prop:"articleId",label:"文章 ID"}},[a("Input",{staticStyle:{width:"100px"},attrs:{type:"text"},model:{value:t.task.articleId,callback:function(e){t.$set(t.task,"articleId",e)},expression:"task.articleId"}})],1),a("FormItem",{attrs:{prop:"targetLikeCount",label:"点赞数"}},[a("InputNumber",{attrs:{min:1,max:80},model:{value:t.task.targetLikeCount,callback:function(e){t.$set(t.task,"targetLikeCount",e)},expression:"task.targetLikeCount"}})],1),a("FormItem",{attrs:{prop:"comment",label:"评论"}},[a("Input",{staticStyle:{width:"400px"},attrs:{type:"text"},model:{value:t.task.comment,callback:function(e){t.$set(t.task,"comment",e)},expression:"task.comment"}})],1),a("Button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("提交")])],1),a("Table",{attrs:{columns:t.columns,data:t.tasks,border:"border",size:"small"}})],1)},staticRenderFns:[]};var f={components:{Status:a("VU/8")(u,d,!1,function(t){a("Knom")},"data-v-0b4f8ca1",null).exports,Tasks:a("VU/8")(m,k,!1,function(t){a("cbuH")},"data-v-4011f424",null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Row",{attrs:{type:"flex"}},[e("Col",{attrs:{span:"6"}},[e("Status")],1),e("Col",{attrs:{span:"18"}},[e("Tasks")],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(f,h,!1,function(t){a("QeZj")},"data-v-1c1b3a5f",null).exports,x=a("BTaQ"),b=a.n(x);a("+skl");s.default.config.productionTip=!1,s.default.use(b.a),new s.default({el:"#app",render:function(t){return t(v)}})},QeZj:function(t,e){},cbuH:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.9f160e50430cb3d80546.js.map